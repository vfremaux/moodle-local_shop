{"version":3,"sources":["../src/front.js"],"names":["define","$","log","cfg","str","shopfront","eulas","shopid","units","required","assigned","endusermobilephonerequired","strings","init","params","get_strings","key","component","done","s","bind","toggle_description","clear_product","update_product","check_pass_code","check_email","add_unit","delete_unit","add_assign","delete_assign","toggle_invoiceinfo","delete_user","add_user","debug","initeulas","accept_eulas","css","that","attr","match","replace","parent","children","removeClass","addClass","elm","checked","document","driverform","elements","value","url","val","wwwroot","get","reset_eulas","assignrole","product","urlbase","requiredroles","split","role","rix","html","waiter","post","id","service","what","participantid","options","selectedIndex","data","rolestubs","JSON","parse","content","email","e","stopPropagation","preventDefault","productname","dataobj","update_details","update_totals","maxquant","quant","clearall","currentval","unbind","formobj","forms","rolelist","roles","productlist","products","pt","lastname","firstname","city","enduserorganisationrequired","institution","phone2","participant","stringify","i","j","availables","length","r","p","obj","ptmail","ajax_waiter_img","ajax_success_img","ajax_failure_img","input","passcode","status","test","alert","open_popup","target","window","open","openSalesPopup"],"mappings":"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","sourcesContent":["/*\n *\n */\n// jshint unused:false, undef:false\n\ndefine(['jquery', 'core/log', 'core/config', 'core/str'], function($, log, cfg, str) {\n\n    var shopfront = {\n\n        eulas: 'required',\n\n        shopid: 0,\n\n        units: 0,\n\n        required: 0,\n\n        assigned: 0,\n\n        endusermobilephonerequired: 0,\n\n        // Strings mapping :\n        // 0 =>\n        // 1 => str_replace(\"'\", '\\\\\\'', get_string('notallassigned', 'local_shop'))\n        // 2 => 'continue', 'local_shop'\n        // 3 => str_replace(\"'\", '\\\\\\'', get_string('emptyorder', 'local_shop'))\n        strings: [],\n\n        init: function(params) {\n\n            var stringdefs = [\n                {key: 'invalidemail', component: 'local_shop'}, // 0\n                {key: 'notallassigned', component: 'local_shop'}, // 1\n                {key: 'continue', component: 'local_shop'}, // 2\n                {key: 'emptyorder', component: 'local_shop'}, // 3\n            ];\n\n            str.get_strings(stringdefs).done(function(s) {\n                shopfront.strings = s;\n            });\n\n            // Get all description toggles and bind them.\n            $('.shop-description-toggle').bind('click', this.toggle_description);\n            $('.local-shop-detail-delete').bind('click', this.clear_product);\n            $('.local-shop-order-detail').bind('change', this.update_product);\n            $('.local-shop-password').bind('keypress', this.check_pass_code);\n            $('.local-shop-email').bind('change', this.check_email);\n            $('.local-shop-add-unit').bind('click', this.add_unit);\n            $('.local-shop-delete-unit').bind('click', this.delete_unit);\n            $('.local-shop-add-assign').bind('change', this.add_assign);\n            $('.local-shop-delete-assign').bind('click', this.delete_assign);\n            $('.local-shop-toggle-invoiceinfo').bind('change', this.toggle_invoiceinfo);\n            $('.local-shop-delete-user').bind('click', this.delete_user);\n            $('.local-shop-add-user').bind('click', this.add_user);\n\n            if (params) {\n                shopfront.shopid = params.shopid;\n                shopfront.units = params.units;\n                shopfront.required = params.required;\n                shopfront.assigned = params.assigned;\n                shopfront.endusermobilephonerequired = params.endusermobilephonerequired;\n            }\n\n            log.debug('AMD Local Shop Front initialized');\n        },\n\n        initeulas: function(params) {\n            // Get all description toggles and bind them.\n            $('#shop-eula-confirm').bind('click', this.accept_eulas);\n\n            if (params) {\n                if (params.eulas === 'required') {\n                    $('#region-pre').css('display', 'none');\n                }\n                shopfront.eulas = params.eulas;\n            }\n\n            log.debug('AMD Local Shop Front Eulas initialized');\n        },\n\n        toggle_description: function() {\n\n            var that = $(this);\n\n            if (that.attr('src').match('/open/')) {\n                that.attr('src', that.attr('src').replace('open', 'close'));\n                that.parent().parent().children('.shop-front-description').removeClass('shop-desc-gradient');\n            } else {\n                that.attr('src', that.attr('src').replace('close', 'open'));\n                that.parent().parent().children('.shop-front-description').addClass('shop-desc-gradient');\n            }\n        },\n\n        toggle_invoiceinfo: function() {\n\n            var elm;\n\n            if (this.checked) {\n                $('#shop-invoiceinfo-wrapper').css('display', 'block');\n                if (document.driverform.elements['invoiceinfo::organisation'].value == '') {\n                    elm = document.driverform.elements['invoiceinfo::organisation'];\n                    elm.value = document.driverform.elements['customerinfo::organisation'].value;\n                }\n                if (document.driverform.elements['invoiceinfo::city'].value == '') {\n                    elm = document.driverform.elements['invoiceinfo::city'];\n                    elm.value = document.driverform.elements['customerinfo::city'].value;\n                }\n            } else {\n                $('#shop-invoiceinfo-wrapper').css('display', 'none');\n            }\n        },\n\n        accept_eulas: function() {\n\n            var url;\n\n            if ($('#shop-agreeeula').val() == 1) {\n                $('#euladiv').css('display', 'none');\n                $('#order').css('display', 'block');\n                $('#order').css('visibility', 'show');\n                $('#region-pre').css('display', 'block');\n                $('#region-pre').css('visibility', 'show');\n\n                url = cfg.wwwroot + '/local/shop/front/ajax/service.php';\n                url += '?what=agreeeulas';\n                url += '&service=order';\n                url += '&id=' + shopfront.shopid;\n            } else {\n                url = cfg.wwwroot + '/local/shop/front/ajax/service.php';\n                url += '?what=reseteulas';\n                url += '&service=order';\n                url += '&id=' + shopfront.shopid;\n            }\n\n            // Switch state in session to avoid agreeing eulas again (until order changes).\n            $.get(url);\n        },\n\n        reset_eulas: function () {\n            if (shopfront.eulas == 'agreed') {\n                var url = cfg.wwwroot + '/local/shop/front/ajax/service.php';\n                url += '?what=reseteulas';\n                url += '&service=order';\n                url += '&id=' + shopfront.shopid;\n\n                // Switch state in session to avoid agreeing eulas again (until order changes).\n                $.get(url);\n            }\n        },\n\n        add_assign: function() {\n\n            var that = $(this);\n            var assignrole = that.attr('data-role');\n            var product = that.attr('data-product');\n\n            var urlbase = cfg.wwwroot + '/local/shop/front/ajax/service.php';\n\n            var requiredroles = that.attr('data-requiredroles').split(',');\n            var role, rix;\n\n            for (rix in requiredroles) {\n                role = requiredroles[rix];\n                $('#addassign' + role + 'list' + product).html(shopfront.waiter());\n            }\n\n            $.post(\n                urlbase,\n                {\n                    id: shopfront.shopid,\n                    service: 'users',\n                    what: 'addassign',\n                    role: assignrole,\n                    product: product,\n                    participantid: this.options[this.selectedIndex].value\n                },\n                function(data) {\n                    var rolestubs = JSON.parse(data);\n                    for (rix in requiredroles) {\n                        role = requiredroles[rix];\n                        $('#addassign' + role + 'list' + product).html(rolestubs.content[role]);\n                    }\n\n                    // this need be done on positive return or we might unsync\n                    shopfront.assigned++;\n                    if (shopfront.assigned < shopfront.required) {\n                        $('#next-button').css('opacity', '0.5');\n                        $('#next-button').removeClass('shop-active-button');\n                        $('#next-button').attr('disabled', 'disabled');\n                        $('#next-button').attr('title', shopfront.strings[1]);\n                    } else {\n                        $('#next-button').css('opacity', '1.0');\n                        $('#next-button').addClass('shop-active-button');\n                        $('#next-button').attr('disabled', null);\n                        $('#next-button').attr('title', shopfront.strings[2]);\n                    }\n                },\n                'html'\n            );\n        },\n\n        delete_assign: function(assignrole, product, email) {\n\n            var that = $(this);\n\n            var assignrole = that.attr('data-role');\n            var product = that.attr('data-product');\n            var email = that.attr('data-email');\n\n            var urlbase = cfg.wwwroot+'/local/shop/front/ajax/service.php';\n\n            var requiredroles = that.attr('data-requiredroles').split(',');\n            var role,rix;\n\n            for (rix in requiredroles) {\n                role = requiredroles[rix];\n                $('#assignrole' + role + 'list' + product).html(shopfront.waiter());\n            }\n\n            $.post(\n                urlbase,\n                {\n                    id: shopfront.shopid,\n                    service: 'users',\n                    what: 'deleteassign',\n                    role: assignrole,\n                    product: product,\n                    participantid: email\n                },\n                function(data) {\n                    var rolestubs = JSON.parse(data);\n                    for (rix in requiredroles) {\n                        role = requiredroles[rix];\n                        $('#assignrole' + role + 'list' + product).html(rolestubs.content[role]);\n                    }\n                    shopfront.assigned--;\n                    if (shopfront.assigned < 0) {\n                        shopfront.assigned = 0; // security, should not happen\n                    }\n                    if (shopfront.assigned < shopfront.required) {\n                        $('#next-button').css('opacity', '0.5');\n                        $('#next-button').removeClass('shop-active-button');\n                        $('#next-button').attr('disabled', 'disabled');\n                        $('#next-button').attr('title', shopfront.strings[1]);\n                    } else {\n                        $('#next-button').css('opacity', '1.0');\n                        $('#next-button').addClass('shop-active-button');\n                        $('#next-button').attr('disabled', null);\n                        $('#next-button').attr('title', shopfront.strings[2]);\n                    }\n                },\n                'html'\n            );\n        },\n\n        /*\n         * @TODO id to remove\n         *\n         */\n        add_unit: function(e) {\n\n            e.stopPropagation();\n            e.preventDefault();\n\n            var that = $(this);\n\n            var productname = that.attr('data-product');\n\n            var urlbase = cfg.wwwroot + '/local/shop/front/ajax/service.php';\n\n            $('#bag_' + productname).html(shopfront.waiter());\n\n            $.post(\n                urlbase,\n                {\n                    id: shopfront.shopid,\n                    service: 'shop',\n                    what: 'addunit',\n                    productname: productname\n                },\n\n                function(data) {\n                    var dataobj = JSON.parse(data);\n                    $('#bag_' + productname).html(dataobj.html);\n\n                    shopfront.update_details();\n                    shopfront.update_totals();\n\n                    var maxquant = that.attr('data-maxquant');\n                    log.debug(maxquant + '>=' + dataobj.quant);\n                    if ((maxquant > 0) && (dataobj.quant >= maxquant)) {\n                        $('#ci-' + productname).attr('disabled', 'disabled');\n                        $('#cimod-' + productname).attr('disabled', 'disabled');\n                    }\n\n                },\n                'html'\n            );\n\n            shopfront.units++;\n            $('#next-button').attr('disabled', null);\n            $('#next-button').addClass('shop-active-button');\n            $('#next-button').css('opacity', '1.0');\n            $('#next-button').attr('title', shopfront.strings[2]);\n        },\n\n        delete_unit: function(e) {\n\n            e.stopPropagation();\n            e.preventDefault();\n\n            var that = $(this);\n\n            var productname = that.attr('data-product');\n            var urlbase = cfg.wwwroot + '/local/shop/front/ajax/service.php';\n\n            $('#bag_' + productname).html(shopfront.waiter());\n\n            $.post(\n                urlbase,\n                {\n                    id: shopfront.shopid,\n                    service: 'shop',\n                    what: 'deleteunit',\n                    productname: productname,\n                    clearall: 0\n                },\n                function(data) {\n                    var dataobj = JSON.parse(data);\n                    $('#bag_' + productname).html(dataobj.html);\n\n                    shopfront.update_details();\n                    shopfront.update_totals();\n\n                    log.debug('enabling product add button ' + productname);\n                    $('#ci-' + productname).attr('disabled', null);\n                    $('#cimod-' + productname).attr('disabled', null);\n                },\n                'html'\n            );\n\n            shopfront.units--;\n            if (shopfront.units == 0) {\n                $('#next-button').attr('disabled', 'disabled');\n                $('#next-button').removeClass('shop-active-button');\n                $('#next-button').css('opacity', '0.5');\n                $('#next-button').attr('title', shopfront.strings[3]);\n            }\n        },\n\n        clear_product: function(e) {\n\n            e.stopPropagation();\n            e.preventDefault();\n\n            var that = $(this);\n\n            var productname = that.attr('data-product');\n\n            var urlbase = cfg.wwwroot + '/local/shop/front/ajax/service.php';\n\n            $('#bag_' + productname).html(shopfront.waiter());\n\n            $('#id_' + productname).val(0);\n            $('#ci-' + productname).attr('disabled', null);\n            $('#id_total_' + productname).val(0);\n\n            $.post(\n                urlbase,\n                {\n                    id: shopfront.shopid,\n                    service: 'shop',\n                    what: 'deleteunit',\n                    productname: productname,\n                    clearall: 1\n                },\n                function(data) {\n                    var dataobj = JSON.parse(data);\n                    $('#bag_' + productname).html(dataobj.html);\n\n                    shopfront.update_details();\n                    shopfront.update_totals();\n                },\n                'html'\n            );\n        },\n\n        update_product: function(e) {\n\n            e.stopPropagation();\n            e.preventDefault();\n\n            var that = $(this);\n\n            var productname = that.attr('data-product');\n            var maxquant = that.attr('data-maxquant');\n\n            var urlbase = cfg.wwwroot + '/local/shop/front/ajax/service.php';\n\n            var currentval = $('#id_' + productname).val();\n            if (maxquant > 0 && currentval > maxquant) {\n                currentval = maxquant;\n            }\n\n            $('#id_' + productname).val(currentval);\n            $('#bag_' + productname).html(shopfront.waiter());\n\n            $.post(\n                urlbase,\n                {\n                    id: shopfront.shopid,\n                    service: 'shop',\n                    what: 'setunits',\n                    productname: productname,\n                    quant: currentval\n                },\n                function(data) {\n                    var dataobj = JSON.parse(data);\n                    $('#bag_' + productname).html(dataobj.html);\n\n                    shopfront.update_details();\n                    shopfront.update_totals();\n                },\n                'html'\n            );\n        },\n\n        update_totals: function() {\n\n            var urlbase = cfg.wwwroot + '/local/shop/front/ajax/service.php';\n\n            $('#shop-ordertotals').html(shopfront.waiter());\n\n            $.post(\n                urlbase,\n                {\n                    id: shopfront.shopid,\n                    service: 'shop',\n                    what: 'ordertotals'\n                },\n                function(data) {\n                    var dataobj = JSON.parse(data);\n                    $('#shop-ordertotals').html(dataobj.html);\n                    $('.local-shop-detail-delete').unbind('click');\n                    $('.local-shop-detail-delete').bind('click', shopfront.clear_product);\n                    $('.local-shop-order-detail').unbind('change');\n                    $('.local-shop-order-detail').bind('change', shopfront.update_product);\n                },\n                'html'\n            );\n        },\n\n        update_details: function() {\n\n            var urlbase = cfg.wwwroot + '/local/shop/front/ajax/service.php';\n\n            $('#order-detail').html(shopfront.waiter());\n            $.post(\n                urlbase,\n                {\n                    id: shopfront.shopid,\n                    service: 'shop',\n                    what: 'orderdetails'\n                },\n                function(data) {\n                    var dataobj = JSON.parse(data);\n                    $('#order-detail').html(dataobj.html);\n                    $('.local-shop-delete-unit').unbind('click');\n                    $('.local-shop-delete-unit').bind('click', shopfront.delete_unit);\n                },\n                'html'\n            );\n        },\n\n        /**\n         * Adds a user in the participant list.\n         * Update role assign selection list.\n         */\n        add_user: function() {\n\n            var that = $(this);\n            var formobj = document.forms['participant'];\n\n            var urlbase = cfg.wwwroot + '/local/shop/front/ajax/service.php';\n\n            // Kind a very simple serialize/unserialize.\n            var rolelist = that.attr('data-requiredroles');\n            var roles = rolelist.split(',');\n            var productlist = that.attr('data-products');\n            var products = productlist.split(',');\n\n            var pt = new Object();\n            pt.lastname = formobj.lastname.value;\n            pt.firstname = formobj.firstname.value;\n            pt.email = formobj.email.value;\n            pt.city = formobj.city.value;\n            if (!shopfront.enduserorganisationrequired) {\n                pt.institution = formobj.institution.value;\n            }\n\n            if (!(shopfront.endusermobilephonerequired)) {\n                pt.phone2 = formobj.phone2.value;\n            }\n\n            $('#participantlist').html(shopfront.waiter());\n\n            $.post(\n                urlbase,\n                {\n                    id: shopfront.shopid,\n                    service: 'users',\n                    what: 'addparticipant',\n                    participant: JSON.stringify(pt),\n                    roles: JSON.stringify(roles)\n                },\n                function(data) {\n\n                    var formobj;\n                    var i,j;\n\n                    $('#participantlist').html(data);\n                    // Rebind delete icons.\n                    $('.local-shop-delete-user').unbind('click');\n                    $('.local-shop-delete-user').bind('click', shopfront.delete_user);\n\n                    // Reset firstname, lastname and email for next user.\n                    formobj = document.forms['participant'];\n                    formobj.lastname.value = '';\n                    formobj.firstname.value = '';\n                    formobj.email.value = '';\n                    // Keep city and institution values to speed up input\n                    // formobj.city.value = '';\n                    if (!(shopfront.endusermobilephonerequired)) {\n                        formobj.phone2.value = '';\n                    }\n\n                    var availables = that.attr('data-availableseats');\n                    availables--;\n                    that.attr('data-availableseats', availables);\n                    if (availables === 0) {\n                        that.attr('disabled', 'disabled');\n                    }\n\n                    for (i = 0; i < roles.length; i++) {\n                        for (j = 0; j < products.length; j++) {\n                            $('#' + roles[i] + 'list' + products[j]).html(shopfront.waiter());\n                        }\n                    }\n\n                    $.post(\n                        urlbase,\n                        {\n                            id: shopfront.shopid,\n                            service: 'users',\n                            what: 'assignalllistobj',\n                        },\n                        function(data) {\n                            var i, j, r, p, obj, html;\n\n                            obj = JSON.parse(data);\n                            for (i = 0; i < roles.length; i++) {\n                                r = roles[i];\n                                for (j = 0; j < products.length; j++) {\n                                    p = products[j];\n                                    html = obj.content[r][p];\n                                    $('#' + r + 'list' + p).html(html);\n                                }\n                            }\n                            $('.local-shop-add-assign').unbind('change');\n                            $('.local-shop-add-assign').bind('change', this.add_assign);\n                        },\n                        'html'\n                    );\n                },\n                'html'\n            );\n        },\n\n        delete_user: function() {\n\n            var that = $(this);\n            var ptmail = that.attr('data-ptmail');\n\n            var urlbase = cfg.wwwroot + '/local/shop/front/ajax/service.php';\n\n            // Kind a very simple serialize/unserialize.\n            var rolelist = that.attr('data-requiredroles');\n            var roles = rolelist.split(',');\n            var productlist = that.attr('data-products');\n            var products = productlist.split(',');\n\n            $('#participantlist').html(shopfront.waiter());\n\n            $.post(urlbase,\n                {\n                    id: shopfront.shopid,\n                    service: 'users',\n                    what: 'deleteparticipant',\n                    participantid: ptmail,\n                    roles: JSON.stringify(roles)\n                },\n                function(data) {\n                    var i,j;\n\n                    $('#participantlist').html(data);\n                    // Rebind delete icons.\n                    $('.local-shop-delete-user').unbind('click');\n                    $('.local-shop-delete-user').bind('click', shopfront.delete_user);\n\n                    var availables = that.attr('data-availableseats');\n                    that.attr('data-availableseats', availables + 1);\n                    that.attr('disabled', null);\n                    $('#addparticipant-line').css('display', 'block');\n\n                    for (i = 0; i < roles.length; i++) {\n                        for (j = 0; j < products.length; j++) {\n                            $('#' + roles[i] + 'list' + products[j]).html(shopfront.waiter());\n                        }\n                    }\n\n                    $.post(\n                        urlbase,\n                        {\n                            id: shopfront.shopid,\n                            service: 'users',\n                            what: 'assignalllistobj',\n                        },\n                        function(data) {\n                            var i, j, r, p, obj, html;\n                            obj = JSON.parse(data);\n                            for (i = 0; i < roles.length; i++) {\n                                r = roles[i];\n                                for (j = 0; j < products.length; j++) {\n                                    p = products[j];\n                                    html = obj.content[r][p];\n                                    $('#' + r + 'list' + p).html(html);\n                                }\n                            }\n                            $('.local-shop-add-assign').unbind('change');\n                            $('.local-shop-add-assign').bind('change', this.add_assign);\n                        },\n                        'html'\n                    );\n                }\n            );\n        },\n\n        check_pass_code: function(e) {\n\n            var that = $(this);\n\n            var productname = that.attr('data-product');\n\n            var urlbase = cfg.wwwroot + '/local/shop/front/ajax/service.php';\n\n            var ajax_waiter_img = '<img width=\"14\" height=\"14\" src=\"' + cfg.wwwroot + '/local/shop/pix/ajaxloader.gif\" />';\n            var ajax_success_img = '<img width=\"14\" height=\"14\" src=\"' + cfg.wwwroot + '/local/shop/pix/valid.png\" />';\n            var ajax_failure_img = '<img width=\"14\" height=\"14\" src=\"' + cfg.wwwroot + '/local/shop/pix/invalid.png\" />';\n\n            $('#ci-pass-status-' + productname).html(ajax_waiter_img);\n            $('#cimod-pass-status-' + productname).html(ajax_waiter_img);\n\n            var input = that.val() + e.key;\n\n            $.post(\n                urlbase,\n                {\n                    id: shopfront.shopid,\n                    service: 'shop',\n                    what: 'checkpasscode',\n                    productname: productname,\n                    passcode: input\n                },\n                function(data) {\n                    var dataobj = JSON.parse(data);\n                    if (dataobj.status == 'passed') {\n                        $('#ci-' + productname).attr('disabled', null);\n                        $('#ci-pass-status-' + productname).html(ajax_success_img);\n                        $('#cimod-' + productname).attr('disabled', null);\n                        $('#cimod-pass-status-' + productname).html(ajax_success_img);\n                    } else {\n                        $('#ci-pass-status-' + productname).html(ajax_failure_img);\n                        $('#cimod-pass-status-' + productname).html(ajax_failure_img);\n                    }\n                },\n                'html'\n            );\n        },\n\n        check_email: function() {\n\n            var that = $(this);\n\n            if (/^\\w+([\\.+-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(that.val())) {\n                return (true);\n            }\n            alert(shopfront.strings[0]);\n            that.val('');\n            return (false);\n        },\n\n        waiter: function() {\n            return '<div class=\"ajax-waiter\">' +\n              '<center>' +\n              '<img src=\"' + cfg.wwwroot + '/local/shop/pix/loading29.gif\" />' +\n              '<center>' +\n              '</div>';\n        },\n\n        open_popup: function(target) {\n            var that = $(this);\n            var target = that.attr('data-target');\n            window.open(target, \"product\", \"width=400,height=500,toolbar=0,menubar=0,statusbar=0\");\n        },\n\n        openSalesPopup: function() {\n            var winparams = \"width=600,height=600,toolbar=0,menubar=0,statusbar=0, resizable=1,scrollbars=1\";\n            window.open(cfg.wwwroot + \"/local/shop/popup.php?p=sales\", \"sales\", winparams);\n        }\n\n    };\n\n    return shopfront;\n\n});\n"],"file":"front.min.js"}