{"version":3,"file":"productdetail.min.js","sources":["../src/productdetail.js"],"sourcesContent":["/*\n *\n */\n// jshint unused:false, undef:false\n\ndefine(['jquery', 'core/log', 'core/config'], function($, log, cfg) {\n\n    var shopproductdetail = {\n\n        init: function() {\n            // Binds response to product pass code when defined.\n            $('#ci-pass').bind('change', this.check_pass_code);\n        },\n\n        /*\n         * Similar to front.js, but single product in page.\n         */\n        check_pass_code: function(e) {\n\n            var that = $(this);\n\n            var productname = that.attr('data-product');\n\n            var urlbase = cfg.wwwroot + '/local/shop/front/ajax/service.php';\n\n            var ajax_waiter_img = '<img width=\"14\" height=\"14\" src=\"' + cfg.wwwroot + '/local/shop/pix/ajaxloader.gif\" />';\n            var ajax_success_img = '<img width=\"14\" height=\"14\" src=\"' + cfg.wwwroot + '/local/shop/pix/valid.png\" />';\n            var ajax_failure_img = '<img width=\"14\" height=\"14\" src=\"' + cfg.wwwroot + '/local/shop/pix/invalid.png\" />';\n\n            $('#ci-pass-status-' + productname).html(ajax_waiter_img);\n            $('#cimod-pass-status-' + productname).html(ajax_waiter_img);\n\n            var input = that.val() + e.key;\n\n            $.post(\n                urlbase,\n                {\n                    service: 'shop',\n                    what: 'checkpasscode',\n                    productname: productname,\n                    passcode: input\n                },\n                function(data) {\n                    var dataobj = JSON.parse(data);\n                    if (dataobj.status == 'passed') {\n                        $('#ci-add-to-bag').attr('disabled', null);\n                        $('#ci-pass-status-' + productname).html(ajax_success_img);\n                        $('#cimod-' + productname).attr('disabled', null);\n                        $('#cimod-pass-status-' + productname).html(ajax_success_img);\n                    } else {\n                        $('#ci-add-to-bag').attr('disabled', 'disabled');\n                        $('#ci-pass-status-' + productname).html(ajax_failure_img);\n                        $('#cimod-pass-status-' + productname).html(ajax_failure_img);\n                    }\n                },\n                'html'\n            );\n        },\n    };\n\n    return shopproductdetail;\n\n});"],"names":["define","$","log","cfg","init","bind","this","check_pass_code","e","that","productname","attr","urlbase","wwwroot","ajax_waiter_img","ajax_success_img","ajax_failure_img","html","input","val","key","post","service","what","passcode","data","JSON","parse","status"],"mappings":"AAKAA,kCAAO,CAAC,SAAU,WAAY,gBAAgB,SAASC,EAAGC,IAAKC,KAuD3D,MArDwB,CAEpBC,KAAM,WAEFH,EAAE,YAAYI,KAAK,SAAUC,KAAKC,kBAMtCA,gBAAiB,SAASC,GAEtB,IAAIC,KAAOR,EAAEK,MAETI,YAAcD,KAAKE,KAAK,gBAExBC,QAAUT,IAAIU,QAAU,qCAExBC,gBAAkB,oCAAsCX,IAAIU,QAAU,qCACtEE,iBAAmB,oCAAsCZ,IAAIU,QAAU,gCACvEG,iBAAmB,oCAAsCb,IAAIU,QAAU,kCAE3EZ,EAAE,mBAAqBS,aAAaO,KAAKH,iBACzCb,EAAE,sBAAwBS,aAAaO,KAAKH,iBAE5C,IAAII,MAAQT,KAAKU,MAAQX,EAAEY,IAE3BnB,EAAEoB,KACET,QACA,CACIU,QAAS,OACTC,KAAM,gBACNb,YAAaA,YACbc,SAAUN,QAEd,SAASO,MAEiB,UADRC,KAAKC,MAAMF,MACbG,QACR3B,EAAE,kBAAkBU,KAAK,WAAY,MACrCV,EAAE,mBAAqBS,aAAaO,KAAKF,kBACzCd,EAAE,UAAYS,aAAaC,KAAK,WAAY,MAC5CV,EAAE,sBAAwBS,aAAaO,KAAKF,oBAE5Cd,EAAE,kBAAkBU,KAAK,WAAY,YACrCV,EAAE,mBAAqBS,aAAaO,KAAKD,kBACzCf,EAAE,sBAAwBS,aAAaO,KAAKD,qBAGpD,SAOhB"}