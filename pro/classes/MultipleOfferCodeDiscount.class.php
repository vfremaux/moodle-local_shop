<?php
/*   __________________________________________________
    |              on 2.0.12              |
    |__________________________________________________|
*/
 namespace local_shop; defined("\115\x4f\x4f\x44\x4c\105\x5f\x49\x4e\124\x45\122\x4e\101\114") || die; require_once $CFG->dirroot . "\57\154\x6f\143\141\154\57\x73\x68\157\160\x2f\160\162\157\x2f\143\154\141\163\163\145\x73\x2f\x4f\x66\146\145\x72\x43\x6f\x64\145\x44\151\163\143\157\x75\156\x74\x2e\x63\x6c\141\x73\163\56\x70\150\160"; use StdClass; use context_system; class MultipleOfferCodeDiscount extends OfferCodeDiscount { public function check_applicability(&$qQ0hv = null) { goto f22xd; E4JwX: $syuG8->ratio = $this->ratio; goto iGGky; OqsCN: $this->checked = true; goto Mwksm; f22xd: global $SESSION; goto GZjVA; ehZch: $xHODM = $SESSION->shoppingcart->discountcodes[$this->id]; goto wu_Mr; iwuep: $this->checked = true; goto fp7bg; fp7bg: return true; goto Js1sv; su_k0: $syuG8->code = $xHODM; goto E4JwX; GZjVA: $VZzZu = $this->get_codes(); goto NW5xs; Eauus: b91XR: goto OqsCN; Js1sv: AiCkv: goto gGVVS; gGVVS: usMJB: goto Eauus; wu_Mr: if (!in_array($xHODM, array_keys($VZzZu))) { goto AiCkv; } goto m8FNg; m8FNg: $this->ratio = $VZzZu[$xHODM]; goto T7KuH; w4ZSJ: if (empty($SESSION->shoppingcart->discountcodes[$this->id])) { goto usMJB; } goto ehZch; iGGky: $this->productiondata = $syuG8; goto iwuep; NW5xs: if (empty($VZzZu)) { goto b91XR; } goto w4ZSJ; T7KuH: $syuG8 = new StdClass(); goto su_k0; Mwksm: return false; goto yo9an; yo9an: } public function preview_applicability() { $Ik0jn = null; return $this->check_applicability($Ik0jn); } public function is_interactive_eligible() { goto BN0Ia; OGXYa: if (empty($this->applyondata)) { goto XpIiO; } goto K_Yar; Uuf0I: return true; goto cinc8; wYXu1: return false; goto D6vKd; Oi9C0: foreach ($ITZWc as $Pj6uN) { goto sGgzB; sGgzB: if (!in_array(trim($Pj6uN), array_keys($SESSION->shoppingcart->order))) { goto OIkAf; } goto MYJ8n; MYJ8n: return true; goto cSGei; LowtF: dDfBQ: goto Auof2; cSGei: OIkAf: goto LowtF; Auof2: } goto gQlqH; K_Yar: $ITZWc = preg_split("\57\x5b\134\x73\x2c\135\x2b\57", $this->applyondata); goto Oi9C0; OLB87: if (!($this->applyon == "\151\164\145\155\x6c\x69\163\x74")) { goto oeMpI; } goto OGXYa; BN0Ia: global $SESSION; goto OLB87; gQlqH: YoMGn: goto wYXu1; D6vKd: XpIiO: goto s6h56; s6h56: oeMpI: goto Uuf0I; cinc8: } public function has_multiple_ratios() { return true; } public function is_interactive_verified() { goto Yj53A; Np00h: $VZzZu = $this->get_codes(); goto Frmw7; Gx9CV: LIu8v: goto qHf8F; UeAoy: I_HLv: goto PcsCZ; yUMkz: if ($this->is_interactive_eligible()) { goto FQSU0; } goto zorRw; Yj53A: global $SESSION; goto yUMkz; LmR7X: return true; goto UeAoy; zorRw: return false; goto TRQ3K; TRQ3K: FQSU0: goto Np00h; PcsCZ: XKiCY: goto vGukK; nzzBH: $this->ratio = $VZzZu[$xHODM]; goto LmR7X; VqFcQ: $SESSION->shoppingcart = new StdClass(); goto Gx9CV; Frmw7: if (!empty($SESSION->shoppingcart->discountcodes)) { goto dKZJE; } goto avpra; ogIPd: dKZJE: goto s0JBb; vGukK: return false; goto odVgx; s3SCx: if (!in_array($xHODM, array_keys($VZzZu))) { goto I_HLv; } goto nzzBH; avpra: if (!empty($SESSION->shoppingcart)) { goto LIu8v; } goto VqFcQ; QFMir: $xHODM = $SESSION->shoppingcart->discountcodes[$this->id]; goto s3SCx; s0JBb: if (empty($SESSION->shoppingcart->discountcodes[$this->id])) { goto XKiCY; } goto QFMir; qHf8F: $SESSION->shoppingcart->discountcodes = []; goto ogIPd; odVgx: } protected function get_codes() { goto v3ykQ; Joaxz: uQzps: goto ILeH0; xLfu7: foreach ($coM6y as $zb2og) { goto K3HqL; K3HqL: list($J0nx7, $p8Q9C) = explode("\x7c", $zb2og); goto lWpaG; lWpaG: $VZzZu[$J0nx7] = $p8Q9C; goto vvJvB; vvJvB: LXxd3: goto UGUoQ; UGUoQ: } goto Joaxz; ILeH0: return $VZzZu; goto s1toH; v3ykQ: $coM6y = preg_split("\57\133\134\x73\54\135\53\57", $this->ruledata); goto QOS7E; QOS7E: $VZzZu = []; goto xLfu7; s1toH: } protected function check_ruledata($lWyz5) { goto txT6I; jREwk: return false; goto YJ3O2; B5AMx: foreach ($coM6y as $zb2og) { goto drqWM; xPcrP: Fblho: goto FkUOS; drqWM: if (!empty(trim($zb2og))) { goto Fblho; } goto DJMZ0; UVtKx: if (is_numeric($drPdi[1])) { goto a8vkb; } goto x0b0w; FkUOS: $drPdi = explode("\x7c", $zb2og); goto k12o2; dyivZ: return get_string("\145\x72\x72\157\162\144\151\x73\143\x6f\165\x6e\x74\72\156\157\164\x65\x6e\x6f\165\147\150\x61\x72\147\x75\155\x65\x6e\x74\163", "\x6c\x6f\x63\x61\x6c\137\163\150\x6f\160"); goto p6JYZ; ibjIw: a8vkb: goto dNnsA; t47ll: jBVtW: goto UVtKx; x0b0w: return get_string("\145\x72\x72\157\x72\x64\x69\163\143\x6f\x75\156\164\x3a\142\141\x64\x72\x61\164\151\157\x66\x6f\162\x6d\x61\x74", "\x6c\157\143\141\x6c\137\x73\x68\x6f\x70"); goto ibjIw; A0Gzi: return get_string("\145\162\x72\157\162\144\x69\x73\x63\x6f\x75\156\x74\x3a\x65\155\x70\164\x79\143\157\144\145", "\x6c\x6f\x63\141\x6c\137\x73\x68\x6f\160"); goto t47ll; dNnsA: fwyNj: goto U2sct; YpHJ3: if (empty($drPdi[0])) { goto jBVtW; } goto A0Gzi; DJMZ0: goto fwyNj; goto xPcrP; k12o2: if (!(count($drPdi) != 2)) { goto jHXPZ; } goto dyivZ; p6JYZ: jHXPZ: goto YpHJ3; U2sct: } goto lbxo0; BqvOV: $VZzZu = []; goto B5AMx; txT6I: global $DB; goto FCebW; FCebW: $coM6y = preg_split("\x2f\x5b\134\x73\54\x5d\x2b\x2f", $lWyz5->ruledata); goto BqvOV; lbxo0: O1s4j: goto jREwk; YJ3O2: } }
