<?php
/*   __________________________________________________
    |              on 2.0.12              |
    |__________________________________________________|
*/
 namespace local_shop\backoffice; defined("\x4d\x4f\117\104\x4c\x45\137\111\x4e\124\x45\x52\x4e\101\x4c") || die; require_once $CFG->dirroot . "\x2f\x6c\157\143\x61\x6c\57\x73\150\x6f\x70\x2f\160\x72\x6f\x2f\x63\154\x61\x73\x73\x65\x73\x2f\104\x69\x73\x63\157\x75\156\x74\x2e\x63\154\141\163\x73\x2e\160\150\x70"; require_once $CFG->dirroot . "\57\154\x6f\x63\141\154\x2f\163\x68\x6f\160\57\143\154\x61\x73\163\x65\x73\x2f\x42\x69\x6c\x6c\56\143\154\141\163\x73\56\x70\x68\x70"; require_once $CFG->dirroot . "\x2f\x6c\157\x63\141\x6c\57\x73\x68\157\160\57\143\x6c\141\x73\163\145\x73\57\104\x42\114\x69\163\164\x55\164\151\x6c\163\x2e\143\x6c\141\x73\x73\56\160\x68\x70"; use StdClass; use local_shop\Discount; use local_shop\Bill; use context_system; class discounts_controller { protected $data; protected $received; public function receive($bLyFn, $lWyz5 = null) { goto HQHWJ; daTPU: return; goto RjCh6; vpXOr: goto OjRxg; goto ncczP; Jbcgf: $this->received = true; goto YAIZb; RjCh6: OjRxg: goto jMODh; ncczP: MUOPZ: goto PG7jw; PG7jw: $this->data = (object) $lWyz5; goto leCyz; VDsdv: $this->data = new StdClass(); goto vpXOr; GCK2x: a0zEZ: goto EsqZq; EsqZq: qFI41: goto Jbcgf; HQHWJ: if (!empty($lWyz5)) { goto MUOPZ; } goto VDsdv; jMODh: switch ($bLyFn) { case "\144\145\x6c\x65\x74\145": goto g9Xmo; g9Xmo: $this->data->discountids = required_param_array("\144\151\x73\143\157\165\x6e\164\151\144", PARAM_INT); goto t09Oi; QSGDs: goto qFI41; goto wnN1N; t09Oi: $this->data->shopid = required_param("\x73\x68\157\160\151\144", PARAM_INT); goto QSGDs; wnN1N: case "\165\160": case "\x64\x6f\x77\x6e": goto JKJuG; JKJuG: $this->data->discountid = required_param("\x69\x64", PARAM_INT); goto JNdpu; JNdpu: $this->data->shopid = required_param("\163\150\x6f\x70\151\144", PARAM_INT); goto NkEWT; NkEWT: goto qFI41; goto daXsI; daXsI: case "\x65\144\x69\164": goto qFI41; case "\144\x69\x73\141\142\154\x65": case "\x65\x6e\141\x62\x6c\145": goto Cb8Cr; uvebn: goto qFI41; goto KMkB4; Cb8Cr: $this->data->discountid = required_param("\151\x64", PARAM_INT); goto r5B3N; r5B3N: $this->data->shopid = required_param("\x73\150\x6f\160\151\x64", PARAM_INT); goto uvebn; KMkB4: } goto GCK2x; leCyz: $this->received = true; goto daTPU; YAIZb: } public function process($bLyFn) { goto BqlG_; ApCqx: R_DoU: goto bEk1W; ZBXR1: $EWu3b->up($this->data->discountid); goto tkyfK; c32aG: if (empty($this->data->id)) { goto hSKUa; } goto cQJ16; cQJ16: $DB->update_record("\154\157\x63\x61\x6c\137\x73\150\157\x70\137\x64\x69\163\x63\x6f\165\156\x74", $this->data); goto jGouP; P9ltT: LrbID: goto JUjhf; F3FyO: DXe3L: goto cnWGV; gaGks: jon4H: goto berVM; Knxi3: Hkh3H: goto ziE9B; u8n74: if (!($bLyFn == "\144\x6f\x77\156")) { goto jon4H; } goto vNNJe; fixp8: $this->data->argument = file_save_draft_area_files($O2Mdn, $AO7zv->id, "\154\x6f\x63\141\154\x5f\x73\x68\x6f\x70", "\144\151\163\x63\157\165\156\x74\141\x72\x67\165\x6d\145\x6e\x74", $this->data->id, $this->mform->editoroptions, $this->data->argument); goto WEYJi; KhC_1: if (!empty($this->data->applydata)) { goto qMoY5; } goto qH4av; JUjhf: return Discount::instance($this->data); goto M5O9_; M5O9_: GGPPp: goto ySjL_; xOsH4: if (!($bLyFn == "\145\156\x61\142\x6c\x65")) { goto rSZTT; } goto v6TgM; Oh34M: if (!($bLyFn == "\x64\145\154\145\164\x65")) { goto BXBl0; } goto ugcJb; ZA471: if (!empty($this->data->operator)) { goto Lvdcg; } goto vdEqk; vdEqk: $this->data->operator = "\x61\x63\x63\x75\x6d\x75\154\x61\x74\145"; goto RrSKt; goYpj: throw new \coding_exception("\104\x61\x74\141\40\x6d\x75\163\164\40\x62\145\40\x72\145\143\x65\x69\x76\x65\144\40\x69\x6e\40\143\x6f\156\x74\x72\157\x6c\154\145\x72\x20\142\145\x66\x6f\162\145\40\157\x70\x65\x72\141\164\x69\157\156\56\40\164\150\x69\163\40\151\x73\x20\x61\40\160\162\x6f\147\162\x61\x6d\x6d\151\x6e\x67\x20\145\162\162\x6f\x72\56"); goto jOoFY; CoD2k: qMoY5: goto v2bzx; mkbk4: $DB->set_field("\154\157\x63\x61\x6c\x5f\163\150\157\160\137\144\x69\163\143\x6f\165\156\x74", "\x65\156\141\142\x6c\x65\x64", 0, ["\151\144" => $this->data->discountid]); goto Bw8LT; NoItA: if ($this->received) { goto xgh_x; } goto goYpj; jaP7f: if (!($bLyFn == "\145\144\151\164")) { goto GGPPp; } goto zZbum; jmyIR: hSKUa: goto qR6DJ; PgPYG: goto hZ8F9; goto CoD2k; ySjL_: if (!($bLyFn == "\165\x70")) { goto eDRsP; } goto ZBXR1; OlzvA: oBz1U: goto ApCqx; ag1Mf: $this->data->ordering++; goto jO_du; jO_du: $this->data->id = $DB->insert_record("\154\157\x63\141\x6c\137\x73\150\157\x70\x5f\x64\x69\163\143\x6f\x75\x6e\164", $this->data); goto F3FyO; WEYJi: $this->data = file_postupdate_standard_editor($this->data, "\141\162\x67\x75\155\145\x6e\x74", $this->mform->editoroptions, $AO7zv, "\154\x6f\143\141\x6c\137\163\150\x6f\x70", "\144\x69\163\143\157\x75\x6e\164\x61\162\x67\x75\155\145\156\x74", $this->data->id); goto dWqPl; Jt7JR: unset($this->data->argument_editor); goto KhC_1; Bw8LT: sT4J4: goto xOsH4; y4ot_: rSZTT: goto kMKnz; jOoFY: xgh_x: goto s24wH; qR6DJ: $this->data->timecreated = time(); goto WnIBS; ugcJb: if (!$this->data->discountids) { goto R_DoU; } goto JCQxC; s24wH: $EWu3b = new DBListUtils("\154\157\x63\x61\x6c\137\163\x68\157\x70\137\144\x69\x73\143\157\x75\156\x74", "\x6f\x72\x64\x65\x72\x69\156\x67", ["\163\150\157\160\x69\144" => $this->data->shopid]); goto Oh34M; zZbum: $Jiczt = $this->data->argument_editor; goto s5hl6; WnIBS: $this->data->ordering = $EWu3b->get_max_ordering(); goto ag1Mf; qH4av: $this->data->applydata = ''; goto PgPYG; JCQxC: foreach ($this->data->discountids as $sULbw) { goto C3yep; Hnekp: pJ1hT: goto eavJ3; rpwE0: $EWu3b->reorder; goto Hnekp; Gvl3R: if (!$SA3Fw) { goto pJ1hT; } goto yjlg1; eavJ3: OQOgi: goto VNq8m; C3yep: $SA3Fw = Discount::instance($sULbw); goto Gvl3R; yjlg1: $SA3Fw->delete(); goto rpwE0; VNq8m: } goto OlzvA; berVM: if (!($bLyFn == "\144\151\163\x61\142\154\x65")) { goto sT4J4; } goto mkbk4; v6TgM: $DB->set_field("\x6c\x6f\x63\x61\x6c\x5f\163\x68\157\160\137\x64\151\163\143\x6f\x75\156\x74", "\x65\156\141\x62\x6c\145\x64", 1, ["\151\144" => $this->data->discountid]); goto y4ot_; tkyfK: eDRsP: goto u8n74; f5pBy: $this->data->argument = $Jiczt["\164\145\x78\164"]; goto Jt7JR; Z_8GV: $O2Mdn = file_get_submitted_draft_itemid("\141\162\x67\x75\155\145\156\x74\x5f\145\x64\x69\164\157\x72"); goto fixp8; AiQYx: $this->data->applydata = implode("\x2c", $this->data->applydata); goto Knxi3; vNNJe: $EWu3b->down($this->data->discountid); goto gaGks; RrSKt: Lvdcg: goto lLr7F; dWqPl: $DB->update_record("\154\x6f\x63\x61\x6c\137\163\x68\157\x70\137\x64\151\163\x63\157\x75\x6e\164", $this->data); goto P9ltT; ywOJF: if (empty($this->mform)) { goto LrbID; } goto Z_8GV; lLr7F: $this->data->timemodified = time(); goto c32aG; s5hl6: $this->data->argumentformat = $Jiczt["\146\157\x72\155\141\164"]; goto f5pBy; cnWGV: $AO7zv = context_system::instance(); goto ywOJF; v2bzx: if (!is_array($this->data->applydata)) { goto Hkh3H; } goto AiQYx; jGouP: goto DXe3L; goto jmyIR; BqlG_: global $DB; goto NoItA; ziE9B: hZ8F9: goto ZA471; bEk1W: BXBl0: goto jaP7f; kMKnz: } }
